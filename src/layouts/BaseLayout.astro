---
import "../styles/global.css";
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>{Astro.props.title ?? "My Event"}</title>
  </head>

  <body>
    <header class="top-nav">
      <nav>
        <a href="/">Home</a>
        <a href="/aboutus">About Us</a>
        <a href="/aboutevent">About the Event</a>
      </nav>

      <button
        class="theme-toggle"
        aria-label="Toggle theme"
        onclick="toggleTheme()"
      >
        <span class="theme-icon" aria-hidden="true">☾</span>
        <span class="theme-label">Mood</span>
      </button>
    </header>

    <div class="site-content">
      <slot />
    </div>
    <footer class="site-footer">
      <div class="footer-inner">
        <div class="footer-left">
          <p>© {new Date().getFullYear()} Safeword Society</p>
        </div>

        <div class="footer-right">
          <a href="/impressum">Impressum</a>
          <a
            href="mailto:hello@safewordsociety.me"
            aria-label="Email"
            class="social-link"
          >
            <svg
              class="email-icon"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <rect
                x="3"
                y="5"
                width="18"
                height="14"
                rx="3"
                stroke="currentColor"
                stroke-width="1.5"></rect>
              <path
                d="M4 7l8 6 8-6"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"></path>
            </svg>
          </a>

          <a
            href="https://instagram.com/safewordsociety"
            target="_blank"
            rel="noopener noreferrer"
            aria-label="Instagram"
            class="social-link"
          >
            <svg
              class="instagram-icon"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <rect
                x="3"
                y="3"
                width="18"
                height="18"
                rx="5"
                stroke="currentColor"
                stroke-width="1.5"></rect>
              <circle
                cx="12"
                cy="12"
                r="4"
                stroke="currentColor"
                stroke-width="1.5"></circle>
              <circle cx="17.5" cy="6.5" r="1" fill="currentColor"></circle>
            </svg>
          </a>
        </div>
      </div>
    </footer>
    <script>
      window.setTheme = function (theme) {
        document.body.setAttribute("data-theme", theme);
        localStorage.setItem("theme", theme);
      };

      window.toggleTheme = function () {
        const current = document.body.getAttribute("data-theme") || "dark";
        window.setTheme(current === "dark" ? "light" : "dark");
      };

      const savedTheme = localStorage.getItem("theme");
      if (savedTheme) {
        document.body.setAttribute("data-theme", savedTheme);
      }
    </script>
    <script>
      const updateThemeIcon = () => {
        const icon = document.querySelector(".theme-icon");
        if (!icon) return;

        const theme = document.body.getAttribute("data-theme") || "dark";

        icon.textContent = theme === "dark" ? "☾" : "☀";
      };

      const originalToggleTheme = window.toggleTheme;

      window.toggleTheme = function () {
        originalToggleTheme();
        updateThemeIcon();
      };

      updateThemeIcon();
    </script>
  </body>
</html>
